# Домашнее задание к занятию "6.1. Типы и структура СУБД"
## Задача 1

<details>
<summary> </summary>

Архитектор ПО решил проконсультироваться у вас, какой тип БД
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

</details>

> Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

> Электронные чеки в json виде

Отлично подойдет NoSQL база данных, пример MongoDB. JSON для нее нативный способ хранения данных и взаимодейстия с данными.

> Склады и автомобильные дороги для логистической компании

Например OpenStreetMaps использует PostgreSQL в качестве основного хранилища данных. Есть отдельный вид пространственных баз данных - обычно реляционная база данных, которые была расширена за счет включения пространственных данных, представляющих объекты, определенные в геометрическом пространстве, а также инструментов для запросов и анализа таких данных.

> Генеалогические деревья

Реляционные БД, это распространённая практика, обеспечат связанность данных.

> Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

Для хранения кеша лучше подходят NoSQL базы, т.к. работают быстро. Для этой цели часто используют Memcached или Redis.

> Отношения клиент-покупка для интернет-магазина

Реляционная БД. Хорошо зарекомендовали себя в сфере eCommerce.

## Задача 2

<details>
<summary> </summary>

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
</details>

> Данные записываются на все узлы с задержкой до часа (асинхронная запись)

**По CAP теореме** - `AP`, т.к. асинхронная запись не может дать гарантию консистентности данных.

**По PACELC теореме** - `PA/EL`, т.к. задержки в один час скорей всего будет достаточно, чтобы устранить небольшие сетевые проблемы, логичней делать упор на отзывчивость.

> При сетевых сбоях, система может разделиться на 2 раздельных кластера

**По CAP теореме** - `AP`, т.к. если система функционирует, разделённая на 2 части, она так же не может быть консистентной.

**По PACELC теореме** - `PA/EL`, тут явно не описано как именно система должна работать при разделении, предположу что имеется в виду остаться доступной.

> Система может не прислать корректный ответ или сбросить соединение

**По CAP теореме** - `CP`, т.к. условие доступности требует, чтобы запрос всегда завершался корректным ответом.

**По PACELC теореме** - `PC/EC`, судя по описанию так как важна не доступность, а согласованность.

## Задача 3

> Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Скорее нет, чем да.

ACID ориентирован на целостность данных, а BASE на их доступность.

Принцип "Soft-state" в BASE противоречит сути ACID, при этом ни один из принципов ACID прямо не противоречит сути BASE.

Выполнение принципов ACID требует от СУБД сложных механизмов проверки целостности базы после каждой транзакции, что существенно замедлит ее, в отличие от BASE СУБД, которая тоже должна гарантировать целостность, но с течением времени.

## Задача 4

<details>
<summary> </summary>

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/).
Что это за система? Какие минусы выбора данной системы?

</details>

Насколько я понимаю речь идёт о Redis. Минусы выбора Redis в качествев Pub/Sub системы:

* Может медленно работать, если настроить персистентность
* Без персистентности, можно потерять данные при сбое сервера или перезапуске сервиса, т.к. данные будут лежать только в оперативной памяти
* Настройка кластеризации может быть [нетривиальна и треует особого внимания](https://redis.io/docs/reference/cluster-spec/#publishsubscribe)
